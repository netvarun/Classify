/*! ClassifyJs v0.12.0 | (c) 2011-2013, Wei Kin Huang | http://classifyjs.com | MIT license | 2013-09-23 */;!function(a,b){"use strict";var c={},d=!{toString:null}.propertyIsEnumerable("toString"),e=d?"hasOwnProperty,valueOf,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,constructor".split(","):[],f=e.length,g=Object.prototype,h=g.toString,i=g.hasOwnProperty,j=Array.prototype.push,k=/^(?:boolean|number|string|undefined)$/,l=function(a){return null===a||k.test(typeof a)},m=function(a){return"[object Function]"===h.call(a)},n=function(a){return a&&a.prototype&&m(a)},o=Array.isArray||function(a){return"[object Array]"===h.call(a)},p=/^\s*function\s+.+?\(.*?\)\s*\{\s*\[native code\]\s*\}\s*$/,q=function(a){return m(a)&&p.test(a.toString())},r=function(a){var b,c=[];for(b in a)c[c.length]=b;if(d)for(b=0;f>b;++b)i.call(a,e[b])&&(c[c.length]=e[b]);return c},s=function(a){return o(a)?a:[a]},t=function(a){return Array.prototype.slice.call(a,0)},u=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;++c)if(a[c]===b)return c;return-1},v=function(a,b){return a.$$original=b,a},w=function(a,c,d){if(!a)return a;var e,f,g=0,h=a.length;if(h===b||m(a))for(f=r(a),h=f.length,e=a[f[0]];h>g&&c.call(d||e,e,f[g],a)!==!1;e=a[f[++g]]);else for(e=a[0];h>g&&c.call(d||e,e,g,a)!==!1;e=a[++g]);return a},x=function(a,b){var c=[];return w(a,function(d,e){c[c.length]=b(d,e,a)}),c},y=function(){var a=t(arguments),b=a.shift();return w(a,function(a){w(r(a),function(c){b[c]=a[c]})}),b},z=function(a,b){var c=u(a,b);return c>-1?(a.splice(c,1),!0):!1},A=/^(?:\$\$\w+|bindings|extend|prototype|(?:add|remove)(?:Static|Aliased|Bound)Property)$/,B=/^__/,C={},D=[],E=q(Object.create)?Object.create:function(a){var b=function(){};return b.prototype=a,new b},F=function(a,b,c){a[b]=c},G=function(){},H=function(){var a=function(){};return a.prototype.init=G,a.prototype.constructor=a,a.$$isclass=!0,a}(),I=function(a,b){return this instanceof I?(y(this,b),this.name=a,this.propTest=new RegExp("^__"+a+"_"),this.propPrefix="__"+a+"_",void 0):new I(a,b)},J=function(a,c){return v(function(){var d,e=this.$$parent;return this.$$parent=a,d=c.apply(this,arguments),e===b?delete this.$$parent:this.$$parent=e,d},c)},K=function(a,b){if(C[a])throw new Error('Adding duplicate mutator "'+a+'".');var c=new I(a,b);C[a]=c,D.push(c)},L=function(a){var b=C[a];if(!b)throw new Error("Removing unknown mutator.");z(D,b),C[a]=null;try{delete C[a]}catch(c){}},M=function(a){var b,c,d=D.slice(0);for(j.apply(d,a.$$mutator),a.getMutators&&j.apply(d,a.getMutators()||[]),b=0,c=d;c>b;b++)if(!(d[b]instanceof I))throw new Error('Mutator objects can only be instances of "Mutator", please use createMutator.');return d},N=function(a,b,c,d,e){var f,h,i;d!==g[c]&&(B.test(c)&&(f=!1,w(e,function(e){return e.onPropAdd&&e.propTest.test(c)?(c===e.propPrefix?w(d,function(c,d){e.onPropAdd.call(e,a,b,d,c)}):e.onPropAdd.call(e,a,b,c.replace(e.propTest,""),d),f=!0,!1):void 0}),f)||(h=b.prototype[c],i=a.prototype,F(i,c,m(d)&&!d.$$isclass&&m(h)?J(h,d):d),m(d)&&w(a.$$subclass,function(a){m(a.prototype[c])&&!a.prototype[c].$$original&&F(a.prototype,c,J(i[c],a.prototype[c]))})))},O=function(a,b,c){var d=!1;if(!B.test(b)||(w(c,function(c){return c.onPropRemove&&c.propTest.test(b)?(c.onPropRemove.call(c,a,b.replace(c.propTest,"")),d=!0,!1):void 0}),!d))if(m(a.prototype[b])){w(a.$$subclass,function(a){a.prototype[b]&&m(a.prototype[b])&&m(a.prototype[b].$$original)&&F(a.prototype,b,a.prototype[b].$$original)}),a.prototype[b]=null;try{delete a.prototype[b]}catch(e){}}else{a.prototype[b]=null;try{delete a.prototype[b]}catch(e){}}},P=function(a,c,d){var e,f,g,h;if(!(a&&a.init&&a instanceof c))return c.invoke.apply(c,d);for(h=M(c),f=0,g=h.length;g>f;f++)if(h[f].onInit&&(e=h[f].onInit.call(h[f],a,c,d),e!==b)){if(l(e))throw new Error("Return values during onInit hook can only be objects.");return e}if(e=a.init.apply(a,d),e!==b){if(l(e))throw new Error("Return values for the constructor can only be objects.");return e}},Q=function(){var a,c,d,e=H,f={},g=[],h=[],j=t(arguments).slice(0,4),k=j.length;if(k>0)for(f=j.pop();--k>0;)d=j.shift(),d.$$isclass||n(d)?e=d:d instanceof I||o(d)&&d[0]instanceof I?h=s(d):g=s(d);return f=y({},f),e.$$isclass||f.init||(f.init=e),a=function(){return P(this,a,t(arguments))},a.toString=function(){return(f.init||G).toString()},delete f.$$apply,a.$$apply=function(b){var c=function(){return a.apply(this,b)};return c.prototype=a.prototype,new c},a.invoke=f.invoke||(e.invoke&&m(e.invoke)&&!e.invoke.$$original?e.invoke:null)||v(function(){return a.$$apply(arguments)},!0),delete f.invoke,a.$$superclass=e,a.$$subclass=[],a.$$implement=(o(e.$$implement)?e.$$implement:[]).concat(g),a.$$mutator=h,w(M(a),function(b){b._onPredefine&&b._onPredefine.call(b,a)}),c=a.prototype=E(e.prototype),a.extend=c.extend=function(){return Q.apply(null,[a].concat(t(arguments)))},e.$$subclass&&o(e.$$subclass)&&e.$$subclass.push(a),f.$$apply=function(a,c){if("$$apply"!==a&&"$$call"!==a&&a in e.prototype&&m(e.prototype[a])){var d,f=this.$$apply;return this.$$apply=e.prototype.$$apply,d=e.prototype[a].apply(this,c||[]),f===b?delete this.$$apply:this.$$apply=f,d}throw new Error('Function "'+a+'" of parent class being invoked is undefined.')},f.$$call=function(a){if("$$apply"!==a&&"$$call"!==a&&a in e.prototype&&m(e.prototype[a])){var c,d=this.$$call,f=t(arguments);return f.shift(),this.$$call=e.prototype.$$call,c=e.prototype[a].apply(this,f||[]),d===b?delete this.$$call:this.$$call=d,c}throw new Error('Function "'+a+'" of parent class being invoked is undefined.')},a.addProperty=function(c,d,f){var g=M(a);return f=f||"",d===b&&"string"!=typeof c?w(r(c),function(b){N(a,e,f+b,c[b],g)}):N(a,e,f+c,d,g),a},a.removeProperty=function(b){return O(a,b,M(a)),a},0!==g.length&&w(g,function(a){var b=a.$$isclass?a.prototype:a;w(r(b),function(a){i.call(c,a)||i.call(f,a)||(f[a]=b[a])})}),w(M(a),function(b){b.onCreate&&b.onCreate.call(b,a,e)}),a.addProperty(f),c.constructor=a,a.$$isclass=!0,w(M(a),function(b){b.onDefine&&b.onDefine.call(b,a)}),a};y(c,{create:Q,Mutator:I,addMutator:K,removeMutator:L}),K("static",{onCreate:function(a){var b=this.propPrefix;a.addStaticProperty=function(c,d){return a.addProperty(c,d,b)},a.removeStaticProperty=function(c){return a.removeProperty(b+c)}},onPropAdd:function(a,b,c,d){A.test(c)||F(a,c,m(d)&&!d.$$isclass?v(function(){return d.apply(a,arguments)},d):d)},onPropRemove:function(a,b){if(!A.test(b)){a[b]=null;try{delete a[b]}catch(c){}}}}),K("nowrap",{onCreate:function(a){var b=this.propPrefix;a.addUnwrappedProperty=function(c,d){return a.addProperty(c,d,b)}},onPropAdd:function(a,b,c,d){F(a.prototype,c,d)}}),K("alias",{onCreate:function(a){var b=this.propPrefix;a.addAliasedProperty=function(c,d){return a.addProperty(c,d,b)}},onPropAdd:function(a,b,c,d){N(a,b,c,function(){return this[d].apply(this,arguments)})}}),K("bind",{onCreate:function(a,b){var c=this;a.bindings=(b.bindings||[]).slice(0),a.addBoundProperty=function(b,d){return a.addProperty(b,d,c.propPrefix)},a.removeBoundProperty=function(b){return a.removeProperty(c.propPrefix+b)}},onPropAdd:function(a,b,c,d){var e=u(a.bindings,c);0>e&&m(d)&&!d.$$isclass&&a.bindings.push(c),N(a,b,c,d)},onPropRemove:function(a,b){z(a.bindings,b)&&(w(a.$$subclass,function(a){u(a.bindings,b)>-1&&!i.call(a.prototype,b)&&a.removeBoundProperty(b)}),O(a,b))},onInit:function(a,c){var d=c.bindings||null;null!==d&&0!==d.length&&w(d,function(d){var e=c.prototype[d];F(a,d,function(){var c,d=a.$$context;return a.$$context=this,c=e.apply(a,arguments),d===b?delete a.$$context:a.$$context=d,c})})}});var R,S,T,U,V={},W="GLOBAL",X=function(a,b){return w(a,function(a){b[a]||(b[a]={}),b=b[a]}),b},Y=function(a,b,c){if("string"==typeof b){if(c=a.get(b),!c)throw new Error("Invalid parent class ["+b+"] specified.");return c}return o(b)?x(b,function(b){return Y(a,b)}):b},Z={create:function(){var a,b,c=t(arguments),d=c.shift(),e=d.split("."),f=e.pop(),g=this,h=X(e,g),i=new I("namespace",{_onPredefine:function(a){a.$$name=f,a.$$namespace=d,a.getNamespace=function(){return g},a.toString=function(){return"[object "+d+"]"},a.getMutators=function(){return g.mutators}}}),k=x(c,function(a){return Y(g,a)}),l=!1;return k=x(k,function(a){return a.$$isclass||n(a)||!(a instanceof I||o(a)&&a[0]instanceof I)||(l=!0,a=s(a),a.unshift(i)),a}),l===!1&&(b=k.pop(),j.call(k,i,b)),a=Q.apply(null,k),a.extend=a.prototype.extend=function(){return Q.apply(null,[a].concat(x(arguments,function(a){return Y(g,a)})))},h[f]=a,g.nsref[d]=a,a},destroy:function(a){var b,c=a.split("."),d=c.pop(),e=this,f=this,g=this.nsref;return w(c,function(a){return f[a]?(f=f[a],void 0):(f=null,!1)}),f?(b=f[d])?(w(b.$$subclass,function(a){e.destroy(a.$$namespace)}),b.$$superclass.$$subclass&&(b.$$superclass.$$subclass=b.$$superclass.$$subclass.slice(0),z(b.$$superclass.$$subclass,b)),w(g,function(b,c){c!==a&&0===c.indexOf(a)&&e.destroy(b.$$namespace)}),delete f[d],delete g[a],this):this:this},exists:function(a){return!!this.nsref[a]},get:function(a){var b;return this.nsref[a]?this.nsref[a]:(b=this.load(a),null!==b?b:this.nsname!==W?U().get(a):null)},load:function(a){return this.nsref[a]||null},setAutoloader:function(a){if(!m(a))throw new Error("Namespace.setAutoloader only takes instances of Function");return this.load=a,this},getName:function(){return this.nsname},addMutator:function(a,b){if(this.namedMutators[a]||C[a])throw new Error('Adding duplicate mutator "'+a+'" in namespace '+this.nsname+".");var c=new I(a,b);this.namedMutators[a]=c,this.mutators.push(c)},removeMutator:function(a){var b=this.namedMutators[a];if(!b)throw new Error("Removing unknown mutator from namespace "+this.nsname+".");z(this.mutators,b),this.namedMutators[a]=null;try{delete this.namedMutators[a]}catch(c){}}},$=Q(y({},Z,{nsname:null,nsref:null,namedMutators:null,mutators:null,init:function(a){this.nsname=a,this.nsref={},this.namedMutators={},this.mutators=[]},toString:function(){return"[namespace "+this.nsname+"]"}}));$.from=function(a,b){if(b instanceof $)throw new Error("Attempting to create a namespace from an existing namespace.");var c={};return w(Z,function(a,d){c[d]=function(){return a.apply(b,arguments)}}),y(b,c,{nsname:a,nsref:{},namedMutators:{},mutators:[]})},R=function(a){return a instanceof $?a:(a=a||W,V[a]||(V[a]=new $(a)),V[a])},S=function(a){a instanceof $&&(a=a.nsname),a!==W&&delete V[a]},T=function(a){for(var b,c=a.split("."),d=c.length;""!==(b=c.slice(0,d--).join("."));)if(V[b])return V[b];return null},U=function(){return R(W)},y(c,{Namespace:$,getNamespace:R,destroyNamespace:S,testNamespace:T,getGlobalNamespace:U,global:U(),provide:function(b,c){return X(b.split("."),c||a||{})}});var _="/",ab=Q({invoke:function(){var a,b,c=t(arguments),d=c.length;return 0===d?R():"string"==typeof c[0]?1===d?(b=c[0].split(_),a=R(b[0]),b[1]?a.get(b[1]):a):2===d&&"string"==typeof c[1]?R(c[0]).get(c[1]):(b=c.shift().split(_),a=R(b[0]),b[1]&&c.unshift(b[1]),a.create.apply(a,c)):Q.apply(null,c)},init:function(){var a,b,c=t(arguments);if(c.length<1)throw new Error("Classify object cannot be instantiated!");return a=o(c[c.length-1])?c.pop():[],b=ab.invoke.apply(null,c),b.$$isclass?b.$$apply(a):b}});if(y(ab,c,{version:"0.12.0",extend:y}),"function"==typeof define&&define.amd&&define("classify",[],function(){return ab}),"undefined"!=typeof module&&module.exports)module.exports=ab,ab.Classify=ab;else{var bb=a.Classify;a.Classify=ab,ab.noConflict=function(){return bb===b?delete a.Classify:a.Classify=bb,ab}}}(this);
//# sourceMappingURL=classify.min.map