/*! ClassifyJs v0.13.0 | (c) 2011-2013, Wei Kin Huang | http://classifyjs.com | MIT license | 2013-09-30 */;!function(a,b){"use strict";var c={},d=!{toString:null}.propertyIsEnumerable("toString"),e=d?"hasOwnProperty,valueOf,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,constructor".split(","):[],f=e.length,g=Object.prototype,h=g.toString,i=g.hasOwnProperty,j=Array.prototype.push,k=/^(?:boolean|number|string|undefined)$/,l=function(){},m=function(a){return null===a||k.test(typeof a)},n=function(a){return"[object Function]"===h.call(a)},o=function(a){return a&&a.prototype&&n(a)},p=Array.isArray||function(a){return"[object Array]"===h.call(a)},q=new RegExp("^"+String(h).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString|for [^\]]+/g,".+?")+"$"),r=function(a){return n(a)&&q.test(a.toString())},s=d?function(a){var b,c=[];for(b in a)c[c.length]=b;if(d)for(b=0;f>b;++b)i.call(a,e[b])&&(c[c.length]=e[b]);return c}:function(a){var b,c=[];for(b in a)c[c.length]=b;return c},t=function(a){return p(a)?a:[a]},u=function(a){return Array.prototype.slice.call(a,0)},v=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;++c)if(a[c]===b)return c;return-1},w=function(a,b){return a.$$original=b,a},x=function(a,c,d){if(!a)return a;var e,f,g=0,h=a.length;if(h===b||n(a))for(f=s(a),h=f.length,e=a[f[0]];h>g&&c.call(d||e,e,f[g],a)!==!1;e=a[f[++g]]);else for(e=a[0];h>g&&c.call(d||e,e,g,a)!==!1;e=a[++g]);return a},y=function(a,b){var c=[];return x(a,function(d,e){c[c.length]=b(d,e,a)}),c},z=function(){var a=u(arguments),b=a.shift();return x(a,function(a){x(s(a),function(c){b[c]=a[c]})}),b},A=function(a,b){var c=v(a,b);return c>-1?(a.splice(c,1),!0):!1},B=r(Object.create)?Object.create:function(a){l.prototype=a;var b=new l;return l.prototype=null,b};z(c,{isScalar:m,isFunction:n,isExtendable:o,isArray:p,isNative:r,keys:s,argsToArray:u,indexOf:v,each:x,map:y,remove:A,extend:z});var C=/^(?:\$\$\w+|bindings|extend|prototype|(?:add|remove)(?:Static|Aliased|Bound)Property)$/,D=/^\$\$(\w+)\$\$/,E="_",F={},G=[],H=function(a,b,c){a[b]=c},I=function(){var a=function(){};return a.prototype.init=l,a.prototype.constructor=a,a.$$isclass=!0,a}(),J=function(a,b){return this instanceof J?(z(this,b),this.name=a,this.greedy=b.greedy===!0,this.propPrefix="$$"+a+"$$",void 0):new J(a,b)},K=function(a,c){return w(function(){var d,e=this.$$parent;return this.$$parent=a,d=c.apply(this,arguments),e===b?delete this.$$parent:this.$$parent=e,d},c)},L=function(a,b){if(F[a])throw new Error('Adding duplicate mutator "'+a+'".');var c=new J(a,b);F[a]=c,G.push(c)},M=function(a){var b=F[a];if(!b)throw new Error("Removing unknown mutator.");A(G,b),F[a]=null;try{delete F[a]}catch(c){}},N=function(a){var b,c,d=G.slice(0);for(j.apply(d,a.$$mutator),a.getMutators&&j.apply(d,a.getMutators()||[]),b=0,c=d;c>b;b++)if(!(d[b]instanceof J))throw new Error('Mutator objects can only be instances of "Mutator", please use createMutator.');return d},O=function(a,c,d,e,f,h){var i,j,k,l=!1;if(e!==g[d]){if(k=D.exec(d)||[],k[1]){if(k[1]&&k[0]===d&&!h)return x(e,function(b,d){O(a,c,k[0]+d,b,f,!0)}),void 0;k=k[1].split(E)}d=d.replace(D,""),x(f,function(f){return f.onPropAdd&&(f.greedy||v(k,f.name)>-1)&&(e=f.onPropAdd.call(f,a,c,d,e,k),e===b)?(l=!0,!1):void 0}),l||(i=c.prototype[d],j=a.prototype,H(j,d,n(e)&&!e.$$isclass&&n(i)?K(i,e):e),n(e)&&x(a.$$subclass,function(a){n(a.prototype[d])&&!a.prototype[d].$$original&&H(a.prototype,d,K(j[d],a.prototype[d]))}))}},P=function(a,c,d){var e,f=!1;if(e=D.exec(c)||[],e[1]&&(e=e[1].split(E)),c=c.replace(D,""),x(d,function(d){return d.onPropRemove&&(d.greedy||v(e,d.name)>-1)&&d.onPropRemove.call(d,a,c)===b?(f=!0,!1):void 0}),!f){n(a.prototype[c])&&x(a.$$subclass,function(a){a.prototype[c]&&n(a.prototype[c])&&n(a.prototype[c].$$original)&&H(a.prototype,c,a.prototype[c].$$original)}),a.prototype[c]=null;try{delete a.prototype[c]}catch(g){}}},Q=function(a,c,d){var e,f,g,h;if(!(a&&a.init&&a instanceof c))return c.invoke.apply(c,d);for(h=N(c),f=0,g=h.length;g>f;f++)if(h[f].onInit&&(e=h[f].onInit.call(h[f],a,c,d),e!==b)){if(m(e))throw new Error("Return values during onInit hook can only be objects.");return e}if(e=a.init.apply(a,d),e!==b){if(m(e))throw new Error("Return values for the constructor can only be objects.");return e}},R=function(){var a,c,d,e=I,f={},g=[],h=[],j=u(arguments).slice(0,4),k=j.length;if(k>0)for(f=j.pop();--k>0;)d=j.shift(),d.$$isclass||o(d)?e=d:d instanceof J||p(d)&&d[0]instanceof J?h=t(d):g=t(d);return f=z({},f),e.$$isclass||f.init||(f.init=e),a=function(){return Q(this,a,u(arguments))},a.toString=function(){return(f.init||l).toString()},delete f.$$apply,a.$$apply=function(b){var c=function(){return a.apply(this,b)};return c.prototype=a.prototype,new c},a.invoke=f.invoke||(e.invoke&&n(e.invoke)&&!e.invoke.$$original?e.invoke:null)||w(function(){return a.$$apply(arguments)},!0),delete f.invoke,a.$$superclass=e,a.$$subclass=[],a.$$implement=(p(e.$$implement)?e.$$implement:[]).concat(g),a.$$mutator=h,x(N(a),function(b){b._onPredefine&&b._onPredefine.call(b,a)}),c=a.prototype=B(e.prototype),a.extend=c.extend=function(){return R.apply(null,[a].concat(u(arguments)))},e.$$subclass&&p(e.$$subclass)&&e.$$subclass.push(a),f.$$apply=function(a,c){if("$$apply"!==a&&"$$call"!==a&&a in e.prototype&&n(e.prototype[a])){var d,f=this.$$apply;return this.$$apply=e.prototype.$$apply,d=e.prototype[a].apply(this,c||[]),f===b?delete this.$$apply:this.$$apply=f,d}throw new Error('Function "'+a+'" of parent class being invoked is undefined.')},f.$$call=function(a){if("$$apply"!==a&&"$$call"!==a&&a in e.prototype&&n(e.prototype[a])){var c,d=this.$$call,f=u(arguments);return f.shift(),this.$$call=e.prototype.$$call,c=e.prototype[a].apply(this,f||[]),d===b?delete this.$$call:this.$$call=d,c}throw new Error('Function "'+a+'" of parent class being invoked is undefined.')},a.addProperty=function(c,d,f){var g=N(a);return f=f||"",d===b&&"string"!=typeof c?x(s(c),function(b){O(a,e,f+b,c[b],g)}):O(a,e,f+c,d,g),a},a.removeProperty=function(b){return P(a,b,N(a)),a},0!==g.length&&x(g,function(a){var b=a.$$isclass?a.prototype:a;x(s(b),function(a){i.call(c,a)||i.call(f,a)||(f[a]=b[a])})}),x(N(a),function(b){b.onCreate&&b.onCreate.call(b,a,e)}),a.addProperty(f),c.constructor=a,a.$$isclass=!0,x(N(a),function(b){b.onDefine&&b.onDefine.call(b,a)}),a};z(c,{create:R,Mutator:J,addMutator:L,removeMutator:M}),L("static",{onCreate:function(a){var b=this.propPrefix;a.addStaticProperty=function(c,d){return a.addProperty(c,d,b)},a.removeStaticProperty=function(c){return a.removeProperty(b+c)}},onPropAdd:function(a,b,c,d){C.test(c)||H(a,c,n(d)&&!d.$$isclass?w(function(){return d.apply(a,arguments)},d):d)},onPropRemove:function(a,b){if(!C.test(b)){a[b]=null;try{delete a[b]}catch(c){}}}}),L("nowrap",{onCreate:function(a){var b=this.propPrefix;a.addUnwrappedProperty=function(c,d){return a.addProperty(c,d,b)}},onPropAdd:function(a,b,c,d){H(a.prototype,c,d)}}),L("alias",{onCreate:function(a){var b=this.propPrefix;a.addAliasedProperty=function(c,d){return a.addProperty(c,d,b)}},onPropAdd:function(a,b,c,d){return function(){return this[d].apply(this,arguments)}}}),L("bind",{onCreate:function(a,b){var c=this.propPrefix;a.bindings=(b.bindings||[]).slice(0),a.addBoundProperty=function(b,d){return a.addProperty(b,d,c)},a.removeBoundProperty=function(b){return a.removeProperty(c+b)}},onPropAdd:function(a,b,c,d){var e=v(a.bindings,c);return 0>e&&n(d)&&!d.$$isclass&&a.bindings.push(c),d},onPropRemove:function(a,b){A(a.bindings,b)&&(x(a.$$subclass,function(a){v(a.bindings,b)>-1&&!i.call(a.prototype,b)&&a.removeBoundProperty(b)}),P(a,b))},onInit:function(a,c){var d=c.bindings||null;null!==d&&0!==d.length&&x(d,function(d){var e=c.prototype[d];H(a,d,function(){var c,d=a.$$context;return a.$$context=this,c=e.apply(a,arguments),d===b?delete a.$$context:a.$$context=d,c})})}});var S,T,U,V,W={},X="GLOBAL",Y=function(a,b){return x(a,function(a){b[a]||(b[a]={}),b=b[a]}),b},Z=function(a,b,c){if("string"==typeof b){if(c=a.get(b),!c)throw new Error("Invalid parent class ["+b+"] specified.");return c}return p(b)?y(b,function(b){return Z(a,b)}):b},$={create:function(){var a,b,c=u(arguments),d=c.shift(),e=d.split("."),f=e.pop(),g=this,h=Y(e,g),i=new J("namespace",{_onPredefine:function(a){a.$$name=f,a.$$namespace=d,a.getNamespace=function(){return g},a.toString=function(){return"[object "+d+"]"},a.getMutators=function(){return g.mutators}}}),k=y(c,function(a){return Z(g,a)}),l=!1;return k=y(k,function(a){return a.$$isclass||o(a)||!(a instanceof J||p(a)&&a[0]instanceof J)||(l=!0,a=t(a),a.unshift(i)),a}),l===!1&&(b=k.pop(),j.call(k,i,b)),a=R.apply(null,k),a.extend=a.prototype.extend=function(){return R.apply(null,[a].concat(y(arguments,function(a){return Z(g,a)})))},h[f]=a,g.nsref[d]=a,a},destroy:function(a){var b,c=a.split("."),d=c.pop(),e=this,f=this,g=this.nsref;return x(c,function(a){return f[a]?(f=f[a],void 0):(f=null,!1)}),f?(b=f[d])?(x(b.$$subclass,function(a){e.destroy(a.$$namespace)}),b.$$superclass.$$subclass&&(b.$$superclass.$$subclass=b.$$superclass.$$subclass.slice(0),A(b.$$superclass.$$subclass,b)),x(g,function(b,c){c!==a&&0===c.indexOf(a)&&e.destroy(b.$$namespace)}),delete f[d],delete g[a],this):this:this},exists:function(a){return!!this.nsref[a]},get:function(a){var b;return this.nsref[a]?this.nsref[a]:(b=this.load(a),null!==b?b:this.nsname!==X?V().get(a):null)},load:function(a){return this.nsref[a]||null},setAutoloader:function(a){if(!n(a))throw new Error("Namespace.setAutoloader only takes instances of Function");return this.load=a,this},getName:function(){return this.nsname},addMutator:function(a,b){if(this.namedMutators[a]||F[a])throw new Error('Adding duplicate mutator "'+a+'" in namespace '+this.nsname+".");var c=new J(a,b);this.namedMutators[a]=c,this.mutators.push(c)},removeMutator:function(a){var b=this.namedMutators[a];if(!b)throw new Error("Removing unknown mutator from namespace "+this.nsname+".");A(this.mutators,b),this.namedMutators[a]=null;try{delete this.namedMutators[a]}catch(c){}}},_=R(z({},$,{nsname:null,nsref:null,namedMutators:null,mutators:null,init:function(a){this.nsname=a,this.nsref={},this.namedMutators={},this.mutators=[]},toString:function(){return"[namespace "+this.nsname+"]"}}));_.from=function(a,b){if(b instanceof _)throw new Error("Attempting to create a namespace from an existing namespace.");var c={};return x($,function(a,d){c[d]=function(){return a.apply(b,arguments)}}),z(b,c,{nsname:a,nsref:{},namedMutators:{},mutators:[]})},S=function(a){return a instanceof _?a:(a=a||X,W[a]||(W[a]=new _(a)),W[a])},T=function(a){a instanceof _&&(a=a.nsname),a!==X&&delete W[a]},U=function(a){for(var b,c=a.split("."),d=c.length;""!==(b=c.slice(0,d--).join("."));)if(W[b])return W[b];return null},V=function(){return S(X)},z(c,{Namespace:_,getNamespace:S,destroyNamespace:T,testNamespace:U,getGlobalNamespace:V,global:V(),provide:function(b,c){return Y(b.split("."),c||a||{})}});var ab="/",bb=R({invoke:function(){var a,b,c=u(arguments),d=c.length;return 0===d?S():"string"==typeof c[0]?1===d?(b=c[0].split(ab),a=S(b[0]),b[1]?a.get(b[1]):a):2===d&&"string"==typeof c[1]?S(c[0]).get(c[1]):(b=c.shift().split(ab),a=S(b[0]),b[1]&&c.unshift(b[1]),a.create.apply(a,c)):R.apply(null,c)},init:function(){var a,b,c=u(arguments);if(c.length<1)throw new Error("Classify object cannot be instantiated!");return a=p(c[c.length-1])?c.pop():[],b=bb.invoke.apply(null,c),b.$$isclass?b.$$apply(a):b}});if(z(bb,c,{version:"0.13.0"}),"function"==typeof define&&define.amd&&define("classify",[],function(){return bb}),"undefined"!=typeof module&&module.exports)module.exports=bb,bb.Classify=bb;else{var cb=a.Classify;a.Classify=bb,bb.noConflict=function(){return cb===b?delete a.Classify:a.Classify=cb,bb}}}(this);
//# sourceMappingURL=classify.min.map