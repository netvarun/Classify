/*! ClassifyJs v0.10.4 | (c) 2011-2013, Wei Kin Huang | http://classifyjs.com | MIT license | 2013-05-10 */;(function(t,e){"use strict";var n={},r=!{toString:null}.propertyIsEnumerable("toString"),o=r?"hasOwnProperty,valueOf,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,constructor".split(","):[],i=o.length,s=Object.prototype,a=s.toString,u=s.hasOwnProperty,l=Array.prototype.push,c=/^(?:boolean|number|string|undefined)$/,p=function(t){return null===t||c.test(typeof t)},f=function(t){return"[object Function]"===a.call(t)},h=function(t){return t&&t.prototype&&f(t)},d=Array.isArray||function(t){return"[object Array]"===a.call(t)},v=/^\s*function\s+.+?\(.*?\)\s*\{\s*\[native code\]\s*\}\s*$/,y=function(t){return f(t)&&v.test(""+t)},m=function(t){var e,n=[];for(e in t)n[n.length]=e;if(r)for(e=0;i>e;++e)u.call(t,o[e])&&(n[n.length]=o[e]);return n},b=function(t){return d(t)?t:[t]},g=function(t){return Array.prototype.slice.call(t,0)},_=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=0,r=t.length;r>n;++n)if(t[n]===e)return n;return-1},P=function(t,e){return t.__original_=e,t},w=function(t,n,r){if(!t)return t;var o,i,s=0,a=t.length;if(a===e||f(t))for(i=m(t),a=i.length,o=t[i[0]];a>s&&n.call(r||o,o,i[s],t)!==!1;o=t[i[++s]]);else for(o=t[0];a>s&&n.call(r||o,o,s,t)!==!1;o=t[++s]);return t},x=function(t,e){var n=[];return w(t,function(r,o){n[n.length]=e(r,o,t)}),n},k=function(t,e){var n=[];return w(t,function(t){t!==e&&(n[n.length]=t)}),n},A=function(){var t=g(arguments),e=t.shift();return w(t,function(t){w(m(t),function(n){e[n]=t[n]})}),e},E=/^(?:superclass|subclass|implement|observable|bindings|extend|prototype|applicate|(?:add|remove)(?:Static|Observable|Aliased|Bound)Property)$/,O=/^__/,M={},C=[],j=y(Object.create)?Object.create:function(t){var e=function(){};return e.prototype=t,new e},L=function(t,e,n){t[e]=n},S=function(){var t=function(){};return t.prototype.init=function(){},t.superclass=null,t.subclass=[],t.implement=[],t.prototype.constructor=S,t.prototype.self=S,t.__isclass_=!0,t}(),R=function(t,n){return this instanceof R?(A(this,n),this.name=t,this.propTest=RegExp("^__"+t+"_"),this.propPrefix="__"+t+"_",e):new R(t,n)},I=function(t,n){return P(function(){var r,o=this.parent;return this.parent=t,r=n.apply(this,arguments),o===e?delete this.parent:this.parent=o,r},n)},N=function(t,e){if(M[t])throw Error('Adding duplicate mutator "'+t+'".');var n=new R(t,e);M[t]=n,C.push(n)},T=function(t){var e=M[t];if(!e)throw Error("Removing unknown mutator.");var n=_(C,e);n>-1&&C.splice(n,1),M[t]=null;try{delete M[t]}catch(r){}},F=function(t){var e,n,r=C.slice(0);for(l.apply(r,t.mutators),t.getMutators&&l.apply(r,t.getMutators()||[]),e=0,n=r;n>e;e++)if(!(r[e]instanceof R))throw Error('Mutator objects can only be instances of "Mutator", please use createMutator.');return r},B=function(t,n,r,o,i){var a,u,l;o!==s[r]&&(O.test(r)&&(a=!1,w(i,function(i){return i.onPropAdd&&i.propTest.test(r)?(r===i.propPrefix?w(o,function(e,r){i.onPropAdd.call(i,t,n,r,e)}):i.onPropAdd.call(i,t,n,r.replace(i.propTest,""),o),a=!0,!1):e}),a)||(u=n.prototype[r],l=t.prototype,L(l,r,f(o)&&!o.__isclass_&&f(u)?I(u,o):o),f(o)&&w(t.subclass,function(t){f(t.prototype[r])&&!t.prototype[r].__original_&&L(t.prototype,r,I(l[r],t.prototype[r]))})))},V=function(t,n,r){var o=!1;if(!O.test(n)||(w(r,function(r){return r.onPropRemove&&r.propTest.test(n)?(r.onPropRemove.call(r,t,n.replace(r.propTest,"")),o=!0,!1):e}),!o))if(f(t.prototype[n])){w(t.subclass,function(t){t.prototype[n]&&f(t.prototype[n])&&f(t.prototype[n].__original_)&&L(t.prototype,n,t.prototype[n].__original_)}),t.prototype[n]=null;try{delete t.prototype[n]}catch(i){}}else{t.prototype[n]=null;try{delete t.prototype[n]}catch(i){}}},$=function(){var t,n,r,o=S,i={},s=[],a=[],l=g(arguments).slice(0,4),c=l.length;if(c>0)for(i=l.pop();--c>0;)r=l.shift(),r.__isclass_||h(r)?o=r:r instanceof R||d(r)&&r[0]instanceof R?a=b(r):s=b(r);return i=A({},i),o.__isclass_||i.init||(i.init=o),t=function(){var n,r,o,i,s;if(!(this&&this.init&&this instanceof t))return t.invoke.apply(t,arguments);for(i=F(t),s=g(arguments),r=0,o=i.length;o>r;r++)if(i[r].onInit&&(n=i[r].onInit.call(i[r],this,t,s),n!==e)){if(p(n))throw Error("Return values during onInit hook can only be objects.");return n}if(n=this.init.apply(this,s),n!==e){if(p(n))throw Error("Return values for the constructor can only be objects.");return n}},delete i.applicate,t.applicate=function(e){var n=function(){return t.apply(this,e)};return n.prototype=t.prototype,new n},t.invoke=i.invoke||(o.invoke&&f(o.invoke)&&!o.invoke.__original_?o.invoke:null)||P(function(){return t.applicate(arguments)},!0),delete i.invoke,t.superclass=o,t.subclass=[],t.implement=(d(o.implement)?o.implement:[]).concat(s),t.mutators=a,w(F(t),function(e){e._onPredefine&&e._onPredefine.call(e,t)}),n=t.prototype=j(o.prototype),t.extend=n.extend=function(){return $.apply(null,[t].concat(g(arguments)))},o.subclass&&d(o.subclass)&&o.subclass.push(t),i.invoke=function(t,e){if(t in o.prototype&&"invoke"!==t&&f(o.prototype[t])){var n,r=this.invoke;return this.invoke=o.prototype.invoke,n=o.prototype[t].apply(this,e||[]),this.invoke=r,n}throw Error('Function "'+t+'" of parent class being invoked is undefined.')},t.addProperty=function(n,r,i){var s=F(t);return i=i||"",r===e&&"string"!=typeof n?w(m(n),function(e){B(t,o,i+e,n[e],s)}):B(t,o,i+n,r,s),t},t.removeProperty=function(e){return V(t,e,F(t)),t},0!==s.length&&w(s,function(t){var e=t.__isclass_?t.prototype:t;w(m(e),function(t){u.call(n,t)||u.call(i,t)||(i[t]=e[t])})}),w(F(t),function(e){e.onCreate&&e.onCreate.call(e,t,o)}),t.addProperty(i),n.constructor=t,n.self=t,t.__isclass_=!0,w(F(t),function(e){e.onDefine&&e.onDefine.call(e,t)}),t};A(n,{create:$,Mutator:R,addMutator:N,removeMutator:T}),N("static",{onCreate:function(t){var e=this.propPrefix;t.addStaticProperty=function(n,r){return t.addProperty(n,r,e)},t.removeStaticProperty=function(n){return t.removeProperty(e+n)}},onPropAdd:function(t,e,n,r){E.test(n)||L(t,n,f(r)&&!r.__isclass_?P(function(){return r.apply(t,arguments)},r):r)},onPropRemove:function(t,e){if(!E.test(e)){t[e]=null;try{delete t[e]}catch(n){}}}}),N("nowrap",{onCreate:function(t){var e=this.propPrefix;t.addUnwrappedProperty=function(n,r){return t.addProperty(n,r,e)}},onPropAdd:function(t,e,n,r){L(t.prototype,n,r)}}),N("alias",{onCreate:function(t){var e=this.propPrefix;t.addAliasedProperty=function(n,r){return t.addProperty(n,r,e)}},onPropAdd:function(t,e,n,r){B(t,e,n,function(){return this[r].apply(this,arguments)})}}),N("bind",{onCreate:function(t,e){var n=this;t.bindings=(e.bindings||[]).slice(0),t.addBoundProperty=function(e,r){return t.addProperty(e,r,n.propPrefix)},t.removeBoundProperty=function(e){return t.removeProperty(n.propPrefix+e)}},onPropAdd:function(t,e,n,r){var o=_(t.bindings,n);0>o&&f(r)&&!r.__isclass_&&t.bindings.push(n),B(t,e,n,r)},onPropRemove:function(t,e){var n=_(t.bindings,e);0>n||(t.bindings.splice(n,1),w(t.subclass,function(t){_(t.bindings,e)>-1&&!u.call(t.prototype,e)&&t.removeBoundProperty(e)}),V(t,e))},onInit:function(t,e){var n=e.bindings||null;null!==n&&0!==n.length&&w(n,function(n){L(t,n,function(){var r=g(arguments);return r.unshift(this),e.prototype[n].apply(t,r)})})}});var D=$({context:null,name:null,events:null,writable:null,delay:null,_debounce:null,value:null,getter:null,setter:null,init:function(t,e,n){if(!t)throw Error("Cannot create Observer without class context.");this.context=t,this.name=e,this.events=[],this.writable=!0,this.delay=0,this._debounce=null,null!==n&&"object"==typeof n?(this.getter=f(n.get)?n.get:null,this.setter=f(n.set)?n.set:null,this.value=n.value,this.writable="boolean"==typeof n.writable?n.writable:!0,this.delay="number"==typeof n.delay?n.delay:0):this.value=n},get:function(){return this.getter?this.getter.call(this.context,this.value):this.value},set:function(t){var e=this.value,n=this.context;return this.writable?(this.value=this.setter?this.setter.call(n,t,e):t,this.value!==e&&this.emit(),n):n},emit:function(){var e=this,n=g(arguments);return this.delay>0?(null!==this._debounce&&t.clearTimeout(this._debounce),this._debounce=t.setTimeout(function(){e._debounce=null,e._triggerEmit(n)},this.delay)):this._triggerEmit(n),this.context},_triggerEmit:function(t){var e=0,n=this.events.length,r=this.context,o=this.events;for(t.unshift(this.value);n>e;++e)o[e].apply(r,t)},addListener:function(t){if(!f(t))throw Error("Observer.addListener only takes instances of Function");return this.events[this.events.length]=t,this.context},once:function(t){if(!f(t))throw Error("Observer.once only takes instances of Function");var e=this,n=function(){e.removeListener(n),t.apply(this,arguments)};return n.listener=t,this.addListener(n),this.context},removeListener:function(t){if(!f(t))throw Error("Observer.removeListener only takes instances of Function");for(var e=this.context,n=this.events,r=-1,o=0,i=n.length;i>o;++o)if(n[o]===t||n[o].listener&&n[o].listener===t){r=o;break}return 0>r?e:(n.splice(o,1),e)},removeAllListeners:function(){return this.events=null,this.events=[],this.context},listeners:function(){return this.events},toValue:function(){return this.value&&this.value.toValue?this.value.toValue():this.value},toString:function(){return"[observer "+this.name+"]"}});D.prototype.on=D.prototype.addListener,n.Observer=D,N("observable",{onCreate:function(t,e){var n=this;t.observable=A({},e.observable||{}),t.addObservableProperty=function(e,r){return t.addProperty(e,r,n.propPrefix)},t.removeObservableProperty=function(e){return t.removeProperty(n.propPrefix+e)}},onPropAdd:function(t,e,n,r){t.observable[n]=r,L(t.prototype,n,null),w(t.subclass,function(t){u.call(t.observable,n)||t.addObservableProperty(n,r)})},onPropRemove:function(t,e){var n=t.observable[e];w(t.subclass,function(t){t.observable[e]===n&&t.removeObservableProperty(e)}),t.observable[e]=null;try{delete t.observable[e]}catch(r){}},onInit:function(t,e){var n,r=e.observable||null;if(null!==r)for(n in r)u.call(r,n)&&(t[n]=new D(t,n,r[n]))}});var G,U,q,z,H={},J="GLOBAL",K=function(t,e){return w(t,function(t){e[t]||(e[t]={}),e=e[t]}),e},Q=function(t,e,n){if("string"==typeof e){if(n=t.get(e),!n)throw Error("Invalid parent class ["+e+"] specified.");return n}return d(e)?x(e,function(e){return Q(t,e)}):e},W={create:function(){var t,e,n=g(arguments),r=n.shift(),o=r.split("."),i=o.pop(),s=this,a=K(o,s),u=new R("namespace",{_onPredefine:function(t){t._name_=i,t._namespace_=r,t.getNamespace=function(){return s},t.toString=function(){return"[object "+r+"]"},t.getMutators=function(){return s.mutators}}}),c=x(n,function(t){return Q(s,t)}),p=!1;return c=x(c,function(t){return t.__isclass_||h(t)||!(t instanceof R||d(t)&&t[0]instanceof R)||(p=!0,t=b(t),t.unshift(u)),t}),p===!1&&(e=c.pop(),l.call(c,u,e)),t=$.apply(null,c),t.extend=t.prototype.extend=function(){return $.apply(null,[t].concat(x(arguments,function(t){return Q(s,t)})))},a[i]=t,s.nsref[r]=t,t},destroy:function(t){var n,r=t.split("."),o=r.pop(),i=this,s=this,a=this.nsref;return w(r,function(t){return s[t]?(s=s[t],e):(s=null,!1)}),s?(n=s[o])?(w(n.subclass,function(t){i.destroy(t._namespace_)}),n.superclass.subclass&&(n.superclass.subclass=k(n.superclass.subclass,n)),w(a,function(e,n){n!==t&&0===n.indexOf(t)&&i.destroy(e._namespace_)}),delete s[o],delete a[t],this):this:this},exists:function(t){return!!this.nsref[t]},get:function(t){var e;return this.nsref[t]?this.nsref[t]:(e=this.load(t),null!==e?e:this.nsname!==J?z().get(t):null)},load:function(t){return this.nsref[t]||null},setAutoloader:function(t){if(!f(t))throw Error("Namespace.setAutoloader only takes instances of Function");return this.load=t,this},getName:function(){return this.nsname},addMutator:function(t,e){if(this.namedMutators[t]||M[t])throw Error('Adding duplicate mutator "'+t+'" in namespace '+this.nsname+".");var n=new R(t,e);this.namedMutators[t]=n,this.mutators.push(n)},removeMutator:function(t){var e=this.namedMutators[t];if(!e)throw Error("Removing unknown mutator from namespace "+this.nsname+".");var n=_(this.mutators,e);n>-1&&this.mutators.splice(n,1),this.namedMutators[t]=null;try{delete this.namedMutators[t]}catch(r){}}},X=$(A({},W,{nsname:null,nsref:null,namedMutators:null,mutators:null,init:function(t){this.nsname=t,this.nsref={},this.namedMutators={},this.mutators=[]},toString:function(){return"[namespace "+this.nsname+"]"}}));X.from=function(t,e){if(e instanceof X)throw Error("Attempting to create a namespace from an existing namespace.");var n={};return w(W,function(t,r){n[r]=function(){return t.apply(e,arguments)}}),A(e,n,{nsname:t,nsref:{},namedMutators:{},mutators:[]})},G=function(t){return t instanceof X?t:(t=t||J,H[t]||(H[t]=new X(t)),H[t])},U=function(t){t instanceof X&&(t=t.nsname),t!==J&&delete H[t]},q=function(t){for(var e,n=t.split("."),r=n.length;""!==(e=n.slice(0,r--).join("."));)if(H[e])return H[e];return null},z=function(){return G(J)},A(n,{Namespace:X,getNamespace:G,destroyNamespace:U,testNamespace:q,getGlobalNamespace:z,global:z(),provide:function(e,n){return K(e.split("."),n||t||{})}});var Y="/",Z=$({invoke:function(){var t,e,n=g(arguments),r=n.length;return 0===r?G():"string"==typeof n[0]?1===r?(e=n[0].split(Y),t=G(e[0]),e[1]?t.get(e[1]):t):2===r&&"string"==typeof n[1]?G(n[0]).get(n[1]):(e=n.shift().split(Y),t=G(e[0]),e[1]&&n.unshift(e[1]),t.create.apply(t,n)):$.apply(null,n)},init:function(){var t,e,n=g(arguments);if(1>n.length)throw Error("Classify object cannot be instantiated!");return t=d(n[n.length-1])?n.pop():[],e=Z.invoke.apply(null,n),e.__isclass_?e.applicate(t):e}});if(A(Z,n,{version:"0.10.4",extend:A}),"function"==typeof define&&define.amd&&define(function(){return Z}),"undefined"!=typeof module&&module.exports)module.exports=Z,Z.Classify=Z;else{var te=t.Classify;t.Classify=Z,Z.noConflict=function(){return te===e?delete t.Classify:t.Classify=te,Z}}})(this);
//@ sourceMappingURL=classify.min.map