/*!
 * Classify JavaScript Library v0.7.0
 * http://www.closedinterval.com/
 *
 * Copyright 2011, Wei Kin Huang
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Date: Thu Feb 16 22:17:01 EST 2012
 */
(function(a,b){"use strict";var c="prototype",d="string",e=function(){var a;for(a in{toString:1})if(a==="toString")return!1;return!0}(),f=e?"hasOwnProperty,valueOf,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,constructor".split(","):[],g=f.length,h=Object[c],i=h.toString,j=function(a){return typeof a=="function"},k=function(a){return a&&a[c]&&i.call(a)==="[object Function]"},l=Array.isArray||function(a){return i.call(a)==="[object Array]"},m=function(a){var b=[],c;for(c in a)b.push(c);if(e)for(c=0;c<g;c++)a.hasOwnProperty(f[c])&&b.push(f[c]);return b},n=function(a){return l(a)?a:[a]},o=function(a){return Array[c].slice.call(a,0)},p=function(a,b){return a.__original_=b,a},q=function(a,c,d){if(!a)return a;var e,f=0,g=a.length;if(g===b||j(a)){for(e in a)if(c.call(d||a[e],a[e],e,a)===!1)break}else for(e=a[0];f<g;e=a[++f])if(c.call(d||e,e,f,a)===!1)break;return a},r=function(a,b){var c=[];return q(a,function(d,e){c[c.length]=b(d,e,a)}),c},s=function(a,b){var c=[];return q(a,function(a){a!==b&&(c[c.length]=a)}),c},t=function(){var a=o(arguments),b=a.shift();return q(a,function(a){q(m(a),function(c){b[c]=a[c]})}),b},u=/^__static_/,v=function(){var a=function(){};return a[c].init=function(){},a.superclass=null,a.subclass=[],a.implement=[],a[c].constructor=v,a[c].self=v,a.__isclass_=!0,a}(),w=function(a,c,d,e){if(e===h[d])return;if(u.test(d))a[d.replace(u,"")]=j(e)?p(function(){return e.apply(a,arguments)},e):e;else{var f=c[c][d];a[c][d]=j(e)&&j(f)?p(function(){var a=this.parent,c;return this.parent=f,c=e.apply(this,arguments),a===b?delete this.parent:this.parent=a,c},e):e}},x=function(){var a=v,c={},d=[],e=arguments,f=e.length;f===1?c=e[0]:f===2?(!e[0].__isclass_&&!k(e[0])?d=n(e[0]):a=e[0],c=e[1]):(a=e[0],d=n(e[1]),c=e[2]),!a.__isclass_&&!c.init&&(c.init=a);var g=function(){if(!this||!this.init||!(this instanceof g))return g.invoke.apply(g,arguments);var a=this.init.apply(this,arguments);if(a!==b)return a};delete c.applicate,g.applicate=function(a){var b=function(){return g.apply(this,a)};return b[c]=g[c],new b},g.invoke=c.invoke||(a.invoke&&!a.invoke.__original_?a.invoke:null)||p(function(){return g.applicate(arguments)},!0),delete c.invoke,g.superclass=a,g.subclass=[],g.implement=(a.implement||[]).concat(d),g.Extend=g[c].Extend=function(a){return x(g,a)};var h=function(){};h[c]=a[c];var i=h[c];return g[c]=new h,a.subclass&&a.subclass.push(g),c.invoke=function(a,b){if(a in i&&a!=="invoke"&&j(i[a])){var c=this.invoke,d;return this.invoke=i.invoke,d=i[a].apply(this,b||[]),this.invoke=c,d}throw Error('Function "'+a+'" of parent class being invoked is undefined.')},g.addProperty=function(a,c,d){return d=d||"",c===b?q(m(a),function(b){w(g,h,d+b,a[b])}):w(g,h,d+a,c),g},g.addStaticProperty=function(a,b){return g.addProperty(a,b,"__static_")},d.length!==0&&q(d,function(a){var d=a.__isclass_?a[c]:a;q(m(d),function(a){g[c][a]===b&&c[a]===b&&g.addProperty(a,d[a])})}),g.addProperty(c),g[c].constructor=g,g[c].self=g,g.__isclass_=!0,g},y={},z="GLOBAL",A,B,C,D,E=function(a,b){return q(a,function(a){b[a]||(b[a]={}),b=b[a]}),b},F=function(a,b,c){if(typeof b===d){c=a[b]||D().get(b)||null;if(!c)throw Error("Invalid parent class ["+b+"] specified.");return c}return l(b)?r(b,function(b){return F(a,b)}):b},G=x({init:function(a){this.ref={},this.name=a},create:function(){var a=o(arguments),b=a.shift(),c=b.split("."),d=c.pop(),e=this,f=E(c,e),g=e.ref,h=x.apply(null,r(a,function(a){return F(g,a)}));return h._name_=d,h._namespace_=b,h.getNamespace=function(){return e},h.toString=function(){return"[object "+b+"]"},f[d]=h,g[b]=h,h},destroy:function(a){var b,c=a.split("."),d=c.pop(),e=this,f=this,g=this.ref;return q(c,function(a){if(!f[a])return f=null,this;f=f[a]}),f?(b=f[d],q(b.subclass,function(a){e.destroy(a._namespace_)}),b.superclass.subclass&&(b.superclass.subclass=s(b.superclass.subclass,b)),q(g,function(b,c){c!==a&&c.indexOf(a)===0&&e.destroy(b._namespace_)}),delete f[d],delete g[a],this):this},exists:function(a){return!!this.ref[a]},get:function(a,b){return j(b)?(this.ref[a]?b(this.ref[a]):this.load(a,b),this):this.ref[a]||this.name!==z&&D().get(a)||null},load:function(a,b){b&&b(this.ref[a]||null)},setAutoloader:function(a){return j(a)?(this.load=a,this):this},getName:function(){return this.name},toString:function(){return"[namespace "+this.name+"]"}});A=function(a){return a instanceof G?a:(a=a||z,y[a]||(y[a]=new G(a)),y[a])},B=function(a){if(a===z)return;delete y[a]},C=function(a){var b=a.split("."),c=b.length,d;while((d=b.slice(0,c--).join("."))!=="")if(y[d])return y[d];return null},D=function(){return A(z)};var H="/",I=x({invoke:function(){var a=o(arguments),b=a.length,c,e;if(b===0)return A();if(typeof a[0]===d)return b===1?(e=a[0].split(H),c=A(e[0]),e[1]?c.get(e[1]):c):b===2&&typeof a[1]===d?A(a[0]).get(a[1]):(e=a.shift().split(H),c=A(e[0]),e[1]&&a.unshift(e[1]),c.create.apply(c,a));return x.apply(null,a)},init:function(){var a=o(arguments),b,c;if(a.length<1)throw Error("Classify object cannot be instantiated!");return b=l(a[a.length-1])?a.pop():[],c=I.invoke.apply(null,a),c.__isclass_?c.applicate(b):c}});t(I,{version:"0.7.0",create:x,getNamespace:A,destroyNamespace:B,testNamespace:C,getGlobalNamespace:D,extend:t,provide:function(b,c){return E(b.split("."),c||a||{})}});if(typeof a.module!="undefined"&&a.module.exports)a.module.exports=I,I.Classify=I;else if(typeof a.define=="function"&&a.define.amd)a.define("classify",function(){return I});else{var J=a.Classify;a.Classify=I,I.noConflict=function(){return J===b?delete a.Classify:a.Classify=J,I}}})(this);;