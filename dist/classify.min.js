/*! ClassifyJs v0.11.0 | (c) 2011-2013, Wei Kin Huang | http://classifyjs.com | MIT license | 2013-09-19 */;!function(a,b){"use strict";var c={},d=!{toString:null}.propertyIsEnumerable("toString"),e=d?"hasOwnProperty,valueOf,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,constructor".split(","):[],f=e.length,g=Object.prototype,h=g.toString,i=g.hasOwnProperty,j=Array.prototype.push,k=/^(?:boolean|number|string|undefined)$/,l=function(a){return null===a||k.test(typeof a)},m=function(a){return"[object Function]"===h.call(a)},n=function(a){return a&&a.prototype&&m(a)},o=Array.isArray||function(a){return"[object Array]"===h.call(a)},p=/^\s*function\s+.+?\(.*?\)\s*\{\s*\[native code\]\s*\}\s*$/,q=function(a){return m(a)&&p.test(a.toString())},r=function(a){var b,c=[];for(b in a)c[c.length]=b;if(d)for(b=0;f>b;++b)i.call(a,e[b])&&(c[c.length]=e[b]);return c},s=function(a){return o(a)?a:[a]},t=function(a){return Array.prototype.slice.call(a,0)},u=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;++c)if(a[c]===b)return c;return-1},v=function(a,b){return a.__original_=b,a},w=function(a,c,d){if(!a)return a;var e,f,g=0,h=a.length;if(h===b||m(a))for(f=r(a),h=f.length,e=a[f[0]];h>g&&c.call(d||e,e,f[g],a)!==!1;e=a[f[++g]]);else for(e=a[0];h>g&&c.call(d||e,e,g,a)!==!1;e=a[++g]);return a},x=function(a,b){var c=[];return w(a,function(d,e){c[c.length]=b(d,e,a)}),c},y=function(a,b){var c=[];return w(a,function(a){a!==b&&(c[c.length]=a)}),c},z=function(){var a=t(arguments),b=a.shift();return w(a,function(a){w(r(a),function(c){b[c]=a[c]})}),b},A=/^(?:superclass|subclass|implement|bindings|extend|prototype|applicate|(?:add|remove)(?:Static|Aliased|Bound)Property)$/,B=/^__/,C={},D=[],E=q(Object.create)?Object.create:function(a){var b=function(){};return b.prototype=a,new b},F=function(a,b,c){a[b]=c},G=function(){var a=function(){};return a.prototype.init=function(){},a.superclass=null,a.subclass=[],a.implement=[],a.prototype.constructor=G,a.prototype.self=G,a.__isclass_=!0,a}(),H=function(a,b){return this instanceof H?(z(this,b),this.name=a,this.propTest=new RegExp("^__"+a+"_"),this.propPrefix="__"+a+"_",void 0):new H(a,b)},I=function(a,c){return v(function(){var d,e=this.parent;return this.parent=a,d=c.apply(this,arguments),e===b?delete this.parent:this.parent=e,d},c)},J=function(a,b){if(C[a])throw new Error('Adding duplicate mutator "'+a+'".');var c=new H(a,b);C[a]=c,D.push(c)},K=function(a){var b=C[a];if(!b)throw new Error("Removing unknown mutator.");var c=u(D,b);c>-1&&D.splice(c,1),C[a]=null;try{delete C[a]}catch(d){}},L=function(a){var b,c,d=D.slice(0);for(j.apply(d,a.mutators),a.getMutators&&j.apply(d,a.getMutators()||[]),b=0,c=d;c>b;b++)if(!(d[b]instanceof H))throw new Error('Mutator objects can only be instances of "Mutator", please use createMutator.');return d},M=function(a,b,c,d,e){var f,h,i;d!==g[c]&&(B.test(c)&&(f=!1,w(e,function(e){return e.onPropAdd&&e.propTest.test(c)?(c===e.propPrefix?w(d,function(c,d){e.onPropAdd.call(e,a,b,d,c)}):e.onPropAdd.call(e,a,b,c.replace(e.propTest,""),d),f=!0,!1):void 0}),f)||(h=b.prototype[c],i=a.prototype,F(i,c,m(d)&&!d.__isclass_&&m(h)?I(h,d):d),m(d)&&w(a.subclass,function(a){m(a.prototype[c])&&!a.prototype[c].__original_&&F(a.prototype,c,I(i[c],a.prototype[c]))})))},N=function(a,b,c){var d=!1;if(!B.test(b)||(w(c,function(c){return c.onPropRemove&&c.propTest.test(b)?(c.onPropRemove.call(c,a,b.replace(c.propTest,"")),d=!0,!1):void 0}),!d))if(m(a.prototype[b])){w(a.subclass,function(a){a.prototype[b]&&m(a.prototype[b])&&m(a.prototype[b].__original_)&&F(a.prototype,b,a.prototype[b].__original_)}),a.prototype[b]=null;try{delete a.prototype[b]}catch(e){}}else{a.prototype[b]=null;try{delete a.prototype[b]}catch(e){}}},O=function(){var a,c,d,e=G,f={},g=[],h=[],j=t(arguments).slice(0,4),k=j.length;if(k>0)for(f=j.pop();--k>0;)d=j.shift(),d.__isclass_||n(d)?e=d:d instanceof H||o(d)&&d[0]instanceof H?h=s(d):g=s(d);return f=z({},f),e.__isclass_||f.init||(f.init=e),a=function(){var c,d,e,f,g;if(!(this&&this.init&&this instanceof a))return a.invoke.apply(a,arguments);for(f=L(a),g=t(arguments),d=0,e=f.length;e>d;d++)if(f[d].onInit&&(c=f[d].onInit.call(f[d],this,a,g),c!==b)){if(l(c))throw new Error("Return values during onInit hook can only be objects.");return c}if(c=this.init.apply(this,g),c!==b){if(l(c))throw new Error("Return values for the constructor can only be objects.");return c}},delete f.applicate,a.applicate=function(b){var c=function(){return a.apply(this,b)};return c.prototype=a.prototype,new c},a.invoke=f.invoke||(e.invoke&&m(e.invoke)&&!e.invoke.__original_?e.invoke:null)||v(function(){return a.applicate(arguments)},!0),delete f.invoke,a.superclass=e,a.subclass=[],a.implement=(o(e.implement)?e.implement:[]).concat(g),a.mutators=h,w(L(a),function(b){b._onPredefine&&b._onPredefine.call(b,a)}),c=a.prototype=E(e.prototype),a.extend=c.extend=function(){return O.apply(null,[a].concat(t(arguments)))},e.subclass&&o(e.subclass)&&e.subclass.push(a),f.invoke=function(a,b){if(a in e.prototype&&"invoke"!==a&&m(e.prototype[a])){var c,d=this.invoke;return this.invoke=e.prototype.invoke,c=e.prototype[a].apply(this,b||[]),this.invoke=d,c}throw new Error('Function "'+a+'" of parent class being invoked is undefined.')},a.addProperty=function(c,d,f){var g=L(a);return f=f||"",d===b&&"string"!=typeof c?w(r(c),function(b){M(a,e,f+b,c[b],g)}):M(a,e,f+c,d,g),a},a.removeProperty=function(b){return N(a,b,L(a)),a},0!==g.length&&w(g,function(a){var b=a.__isclass_?a.prototype:a;w(r(b),function(a){i.call(c,a)||i.call(f,a)||(f[a]=b[a])})}),w(L(a),function(b){b.onCreate&&b.onCreate.call(b,a,e)}),a.addProperty(f),c.constructor=a,c.self=a,a.__isclass_=!0,w(L(a),function(b){b.onDefine&&b.onDefine.call(b,a)}),a};z(c,{create:O,Mutator:H,addMutator:J,removeMutator:K}),J("static",{onCreate:function(a){var b=this.propPrefix;a.addStaticProperty=function(c,d){return a.addProperty(c,d,b)},a.removeStaticProperty=function(c){return a.removeProperty(b+c)}},onPropAdd:function(a,b,c,d){A.test(c)||F(a,c,m(d)&&!d.__isclass_?v(function(){return d.apply(a,arguments)},d):d)},onPropRemove:function(a,b){if(!A.test(b)){a[b]=null;try{delete a[b]}catch(c){}}}}),J("nowrap",{onCreate:function(a){var b=this.propPrefix;a.addUnwrappedProperty=function(c,d){return a.addProperty(c,d,b)}},onPropAdd:function(a,b,c,d){F(a.prototype,c,d)}}),J("alias",{onCreate:function(a){var b=this.propPrefix;a.addAliasedProperty=function(c,d){return a.addProperty(c,d,b)}},onPropAdd:function(a,b,c,d){M(a,b,c,function(){return this[d].apply(this,arguments)})}}),J("bind",{onCreate:function(a,b){var c=this;a.bindings=(b.bindings||[]).slice(0),a.addBoundProperty=function(b,d){return a.addProperty(b,d,c.propPrefix)},a.removeBoundProperty=function(b){return a.removeProperty(c.propPrefix+b)}},onPropAdd:function(a,b,c,d){var e=u(a.bindings,c);0>e&&m(d)&&!d.__isclass_&&a.bindings.push(c),M(a,b,c,d)},onPropRemove:function(a,b){var c=u(a.bindings,b);0>c||(a.bindings.splice(c,1),w(a.subclass,function(a){u(a.bindings,b)>-1&&!i.call(a.prototype,b)&&a.removeBoundProperty(b)}),N(a,b))},onInit:function(a,b){var c=b.bindings||null;null!==c&&0!==c.length&&w(c,function(c){F(a,c,function(){var d=t(arguments);return d.unshift(this),b.prototype[c].apply(a,d)})})}});var P,Q,R,S,T={},U="GLOBAL",V=function(a,b){return w(a,function(a){b[a]||(b[a]={}),b=b[a]}),b},W=function(a,b,c){if("string"==typeof b){if(c=a.get(b),!c)throw new Error("Invalid parent class ["+b+"] specified.");return c}return o(b)?x(b,function(b){return W(a,b)}):b},X={create:function(){var a,b,c=t(arguments),d=c.shift(),e=d.split("."),f=e.pop(),g=this,h=V(e,g),i=new H("namespace",{_onPredefine:function(a){a._name_=f,a._namespace_=d,a.getNamespace=function(){return g},a.toString=function(){return"[object "+d+"]"},a.getMutators=function(){return g.mutators}}}),k=x(c,function(a){return W(g,a)}),l=!1;return k=x(k,function(a){return a.__isclass_||n(a)||!(a instanceof H||o(a)&&a[0]instanceof H)||(l=!0,a=s(a),a.unshift(i)),a}),l===!1&&(b=k.pop(),j.call(k,i,b)),a=O.apply(null,k),a.extend=a.prototype.extend=function(){return O.apply(null,[a].concat(x(arguments,function(a){return W(g,a)})))},h[f]=a,g.nsref[d]=a,a},destroy:function(a){var b,c=a.split("."),d=c.pop(),e=this,f=this,g=this.nsref;return w(c,function(a){return f[a]?(f=f[a],void 0):(f=null,!1)}),f?(b=f[d])?(w(b.subclass,function(a){e.destroy(a._namespace_)}),b.superclass.subclass&&(b.superclass.subclass=y(b.superclass.subclass,b)),w(g,function(b,c){c!==a&&0===c.indexOf(a)&&e.destroy(b._namespace_)}),delete f[d],delete g[a],this):this:this},exists:function(a){return!!this.nsref[a]},get:function(a){var b;return this.nsref[a]?this.nsref[a]:(b=this.load(a),null!==b?b:this.nsname!==U?S().get(a):null)},load:function(a){return this.nsref[a]||null},setAutoloader:function(a){if(!m(a))throw new Error("Namespace.setAutoloader only takes instances of Function");return this.load=a,this},getName:function(){return this.nsname},addMutator:function(a,b){if(this.namedMutators[a]||C[a])throw new Error('Adding duplicate mutator "'+a+'" in namespace '+this.nsname+".");var c=new H(a,b);this.namedMutators[a]=c,this.mutators.push(c)},removeMutator:function(a){var b=this.namedMutators[a];if(!b)throw new Error("Removing unknown mutator from namespace "+this.nsname+".");var c=u(this.mutators,b);c>-1&&this.mutators.splice(c,1),this.namedMutators[a]=null;try{delete this.namedMutators[a]}catch(d){}}},Y=O(z({},X,{nsname:null,nsref:null,namedMutators:null,mutators:null,init:function(a){this.nsname=a,this.nsref={},this.namedMutators={},this.mutators=[]},toString:function(){return"[namespace "+this.nsname+"]"}}));Y.from=function(a,b){if(b instanceof Y)throw new Error("Attempting to create a namespace from an existing namespace.");var c={};return w(X,function(a,d){c[d]=function(){return a.apply(b,arguments)}}),z(b,c,{nsname:a,nsref:{},namedMutators:{},mutators:[]})},P=function(a){return a instanceof Y?a:(a=a||U,T[a]||(T[a]=new Y(a)),T[a])},Q=function(a){a instanceof Y&&(a=a.nsname),a!==U&&delete T[a]},R=function(a){for(var b,c=a.split("."),d=c.length;""!==(b=c.slice(0,d--).join("."));)if(T[b])return T[b];return null},S=function(){return P(U)},z(c,{Namespace:Y,getNamespace:P,destroyNamespace:Q,testNamespace:R,getGlobalNamespace:S,global:S(),provide:function(b,c){return V(b.split("."),c||a||{})}});var Z="/",$=O({invoke:function(){var a,b,c=t(arguments),d=c.length;return 0===d?P():"string"==typeof c[0]?1===d?(b=c[0].split(Z),a=P(b[0]),b[1]?a.get(b[1]):a):2===d&&"string"==typeof c[1]?P(c[0]).get(c[1]):(b=c.shift().split(Z),a=P(b[0]),b[1]&&c.unshift(b[1]),a.create.apply(a,c)):O.apply(null,c)},init:function(){var a,b,c=t(arguments);if(c.length<1)throw new Error("Classify object cannot be instantiated!");return a=o(c[c.length-1])?c.pop():[],b=$.invoke.apply(null,c),b.__isclass_?b.applicate(a):b}});if(z($,c,{version:"0.11.0",extend:z}),"function"==typeof define&&define.amd&&define(function(){return $}),"undefined"!=typeof module&&module.exports)module.exports=$,$.Classify=$;else{var _=a.Classify;a.Classify=$,$.noConflict=function(){return _===b?delete a.Classify:a.Classify=_,$}}}(this);
//# sourceMappingURL=classify.min.map